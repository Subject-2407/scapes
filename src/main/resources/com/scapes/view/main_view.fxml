<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.TilePane?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<BorderPane fx:id="rootPane" prefHeight="600.0" prefWidth="900.0" 
            stylesheets="@style.css"
            xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.scapes.controller.MainController">

    <top>
        <HBox fx:id="topBar" alignment="CENTER_LEFT" spacing="10.0">            
            <ComboBox fx:id="providerCombo" prefWidth="140.0" promptText="Pilih Sumber"/>
            <TextField fx:id="searchField" prefWidth="300.0" promptText="Search wallpapers..." onAction="#onSearchAction"/>
            <Button onAction="#onSearchAction" text="Search"/>
            
            <Button fx:id="themeBtn" onAction="#toggleTheme" text="â˜€"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <HBox alignment="CENTER_RIGHT" spacing="5">
                <Button fx:id="btnMin" onAction="#minimizeApp" text="â€”" style="-fx-background-color: transparent; -fx-cursor: hand; -fx-text-fill: white;"/>
                <Button fx:id="btnMax" onAction="#maximizeApp" text="â¬œ" style="-fx-background-color: transparent; -fx-cursor: hand; -fx-text-fill: white;"/>
                <Button fx:id="btnClose" onAction="#closeApp" text="âœ•" style="-fx-background-color: transparent; -fx-cursor: hand; -fx-text-fill: white;"/>
            </HBox>
        </HBox>
    </top>

    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE" styleClass="custom-tab-pane">
            
            <Tab text="Explore">
                <StackPane>
                    <Label fx:id="welcomeLabel" text="Scapes" textFill="#888888">
                        <font>
                            <Font name="Segoe UI Light" size="64.0"/>
                        </font>
                    </Label>
                    
                    <ScrollPane fx:id="scrollPane" fitToWidth="true" visible="false" style="-fx-background-color: transparent;">
                        <content>
                            <TilePane fx:id="imageGrid" hgap="15" vgap="15" style="-fx-padding: 20;"/>
                        </content>
                    </ScrollPane>
                </StackPane>
            </Tab>

            <Tab text="Collections" onSelectionChanged="#onLocalTabSelected">
                <BorderPane>
                    <top>
                        <HBox alignment="CENTER_RIGHT" style="-fx-padding: 10;">
                            <Button text="ðŸ”„ Refresh Folder" onAction="#loadLocalImages"/>
                        </HBox>
                    </top>
                    <center>
                        <ScrollPane fx:id="localScrollPane" fitToWidth="true" style="-fx-background-color: transparent;">
                            <content>
                                </content>
                        </ScrollPane>
                    </center>
                </BorderPane>
            </Tab>

        </TabPane>
    </center>
</BorderPane>